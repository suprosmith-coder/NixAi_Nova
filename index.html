<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyanix AI | NixAi</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- SEO & Social Preview -->
    <meta name="description" content="High-Intelligence AI with High-Tech Design. Powered by NixAi." />
    <meta name="theme-color" content="#00f0ff">
    <meta name="color-scheme" content="dark">
    <meta property="og:title" content="Cyanix AI" />
    <meta property="og:description" content="High-Intelligence AI with High-Tech Design." />
    <meta property="og:image" content="https://suprosmith-coder.github.io/NixAi_Nova/images/cyanix-preview.png" />
    <meta property="og:image:width" content="1536" />
    <meta property="og:image:height" content="1024" />
    <meta property="og:url" content="https://suprosmith-coder.github.io/NixAi_Nova/" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Cyanix AI" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Cyanix AI" />
    <meta name="twitter:description" content="High-Intelligence AI with High-Tech Design." />
    <meta name="twitter:image" content="https://suprosmith-coder.github.io/NixAi_Nova/images/cyanix-preview.png" />

    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

    <!-- App Stylesheet -->
    <link rel="stylesheet" href="Style.css">
</head>
<body>

    <!-- Background Effects -->
    <div class="cyber-grid"></div>
    <div class="cyber-scanline"></div>
    <div class="floating-particles" id="particles"></div>
    <div class="glow-orb orb-cyan"></div>
    <div class="glow-orb orb-purple"></div>
    <div class="glow-orb orb-teal"></div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- ================================================================
         FILE PREVIEW MODAL
    ================================================================ -->
    <div id="filePreviewModal" class="file-preview-modal">
        <div class="file-preview-content">
            <div class="file-preview-actions">
                <button class="input-button" onclick="downloadPreviewFile()" title="Download">
                    <i class="fas fa-download"></i>
                </button>
                <button class="input-button" onclick="closeFilePreview()" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <img id="previewImage" class="file-preview-image" src="" alt="Preview">
            <iframe id="previewIframe" class="file-preview-iframe" style="display:none;"></iframe>
            <div id="previewText" style="display:none; padding:30px; color:var(--text); font-family:'JetBrains Mono',monospace; max-height:80vh; overflow-y:auto; white-space:pre-wrap;"></div>
        </div>
    </div>

    <!-- ================================================================
         MODEL SELECT MODAL
    ================================================================ -->
    <div id="modelModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Select AI Model</h3>
                <button class="modal-close" onclick="closeModelModal()">&times;</button>
            </div>
            <div class="modal-content">
                <p style="color:var(--text-secondary); margin-bottom:20px; font-size:13px; font-family:'JetBrains Mono',monospace;">
                    Choose the AI model that best suits your needs.
                </p>
                <div class="model-grid" id="modelGrid">
                    <div class="model-card active" data-model="cyanix-maverick" onclick="selectModel('cyanix-maverick')">
                        <div class="model-icon"><i class="fas fa-rocket"></i></div>
                        <div class="model-name">Maverick</div>
                        <div class="model-desc">Llama 4 Â· 128k ctx Â· Vision Â· Best reasoning</div>
                    </div>
                    <div class="model-card" data-model="cyanix-scout" onclick="selectModel('cyanix-scout')">
                        <div class="model-icon"><i class="fas fa-satellite-dish"></i></div>
                        <div class="model-name">Scout</div>
                        <div class="model-desc">Llama 4 Â· 128k ctx Â· Vision Â· Fast &amp; efficient</div>
                    </div>
                    <div class="model-card" data-model="cyanix-flash" onclick="selectModel('cyanix-flash')">
                        <div class="model-icon"><i class="fas fa-bolt"></i></div>
                        <div class="model-name">Flash</div>
                        <div class="model-desc">Llama 4 Scout Â· Ultra-fast Â· Quick answers</div>
                    </div>
                    <div class="model-card" data-model="cyanix-pro" onclick="selectModel('cyanix-pro')">
                        <div class="model-icon"><i class="fas fa-brain"></i></div>
                        <div class="model-name">Pro</div>
                        <div class="model-desc">Llama 4 Maverick Â· Max tokens Â· Deep reasoning</div>
                    </div>
                    <div class="model-card" data-model="cyanix-claude" onclick="selectModel('cyanix-claude')" style="border-color:rgba(205,127,50,0.3);">
                        <div class="model-icon" style="color:#cd7f32;"><i class="fas fa-atom"></i></div>
                        <div class="model-name" style="color:#cd7f32;">Claude</div>
                        <div class="model-desc">Anthropic Claude Â· Sonnet 4.6 Â· Smart &amp; fast</div>
                    </div>
                </div>
                <div style="background:rgba(0,243,255,0.04); padding:14px; border-radius:10px; border:1px solid rgba(0,243,255,0.1);">
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
                        <i class="fas fa-info-circle" style="color:var(--primary);"></i>
                        <span style="color:var(--text); font-weight:600; font-size:13px;">Model Information</span>
                    </div>
                    <div id="modelInfoText" style="color:var(--text-secondary); font-size:12px; line-height:1.8; font-family:'JetBrains Mono',monospace;">
                        Maverick â€” Meta Llama 4 Â· 17B Â· 128k context Â· Up to 5 images per request Â· Multilingual
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" onclick="closeModelModal()">Cancel</button>
                <button class="modal-button primary" onclick="saveModelSelection()">Select Model</button>
            </div>
        </div>
    </div>

    <!-- ================================================================
         FILE ATTACH MODAL
    ================================================================ -->
    <div id="fileModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Attach Files</h3>
                <button class="modal-close" onclick="closeFileModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div class="drop-zone" id="dropZone"
                     style="text-align:center; padding:40px; border:2px dashed rgba(0,243,255,0.25); border-radius:12px; margin-bottom:20px; cursor:pointer; transition:all 0.3s;">
                    <i class="fas fa-cloud-upload-alt" style="font-size:42px; color:var(--primary); margin-bottom:15px; display:block;"></i>
                    <div style="color:var(--text); font-weight:600; margin-bottom:8px;">Drag &amp; Drop Files Here</div>
                    <div style="color:var(--text-secondary); font-size:12px; margin-bottom:20px;">or click to browse files</div>
                    <div style="font-size:11px; color:var(--text-secondary); margin-bottom:14px; font-family:'JetBrains Mono',monospace;">
                        Any file type accepted â€” no restrictions
                    </div>
                    <button class="modal-button primary" onclick="document.getElementById('fileInput').click()">
                        <i class="fas fa-folder-open"></i> Browse Files
                    </button>
                    <input type="file" id="fileInput" multiple style="display:none;" accept="*">
                </div>
                <div id="selectedFiles"></div>
                <div id="uploadProgress" style="display:none;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span style="color:var(--text); font-size:12px;">Uploading...</span>
                        <span id="uploadPercentage" style="color:var(--primary); font-size:12px;">0%</span>
                    </div>
                    <div class="upload-progress"><div class="upload-progress-bar" id="uploadProgressBar"></div></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" onclick="closeFileModal()">Cancel</button>
                <button class="modal-button primary" onclick="uploadFiles()">
                    <i class="fas fa-upload"></i> Upload Files
                </button>
            </div>
        </div>
    </div>

    <!-- ================================================================
         TUTORIX MODAL â€” AI Tutoring Engine
    ================================================================ -->
    <div id="tutorixOverlay" class="tutorix-overlay">
        <div class="tutorix-panel">

            <button class="tutorix-close-btn" onclick="closeTutorix()" title="Close">
                <i class="fas fa-times"></i>
            </button>

            <!-- Header -->
            <div class="tutorix-header">
                <div class="tutorix-icon-wrap">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <div class="tutorix-brand-title">TUTO<span>RIX</span></div>
                    <div class="tutorix-brand-sub">// adaptive AI tutoring engine_</div>
                </div>
            </div>

            <!-- Inputs -->
            <div class="tx-grid">

                <div class="tx-field">
                    <label class="tx-label"><i class="fas fa-book"></i> Subject</label>
                    <input id="txSubject" class="tx-input" type="text"
                           placeholder="Biology, Calculus, Historyâ€¦"
                           list="txSubjectSuggestions">
                    <datalist id="txSubjectSuggestions">
                        <option value="Biology"><option value="Chemistry"><option value="Physics">
                        <option value="Mathematics"><option value="Calculus"><option value="Algebra">
                        <option value="Geometry"><option value="Statistics"><option value="English Literature">
                        <option value="History"><option value="Geography"><option value="Computer Science">
                        <option value="Economics"><option value="Psychology"><option value="Philosophy">
                    </datalist>
                </div>

                <div class="tx-field">
                    <label class="tx-label"><i class="fas fa-user-graduate"></i> Grade / Level</label>
                    <select id="txGrade" class="tx-select">
                        <option value="1">Grade 1</option><option value="2">Grade 2</option>
                        <option value="3">Grade 3</option><option value="4">Grade 4</option>
                        <option value="5">Grade 5</option><option value="6">Grade 6</option>
                        <option value="7">Grade 7</option><option value="8">Grade 8</option>
                        <option value="9">Grade 9</option><option value="10" selected>Grade 10</option>
                        <option value="11">Grade 11</option><option value="12">Grade 12</option>
                        <option value="university">University</option>
                        <option value="adult">Adult Learner</option>
                    </select>
                </div>

                <div class="tx-field span-2">
                    <label class="tx-label"><i class="fas fa-signal"></i> Difficulty</label>
                    <div class="tx-chips">
                        <div class="tx-chip active"    data-value="beginner"     onclick="txSelectChip('difficulty', this)"><i class="fas fa-seedling"></i> Beginner</div>
                        <div class="tx-chip"           data-value="intermediate" onclick="txSelectChip('difficulty', this)"><i class="fas fa-layer-group"></i> Intermediate</div>
                        <div class="tx-chip"           data-value="advanced"     onclick="txSelectChip('difficulty', this)"><i class="fas fa-fire"></i> Advanced</div>
                        <div class="tx-chip"           data-value="exam_prep"    onclick="txSelectChip('difficulty', this)"><i class="fas fa-clipboard-check"></i> Exam Prep</div>
                    </div>
                </div>

                <div class="tx-field span-2">
                    <label class="tx-label"><i class="fas fa-chalkboard-teacher"></i> Output Format</label>
                    <div class="tx-chips">
                        <div class="tx-chip style-active" data-value="explain" onclick="txSelectChip('teachingStyle', this)"><i class="fas fa-comment-dots"></i> Explanation</div>
                        <div class="tx-chip"              data-value="lesson"  onclick="txSelectChip('teachingStyle', this)"><i class="fas fa-book-open"></i> Lesson</div>
                        <div class="tx-chip"              data-value="quiz"    onclick="txSelectChip('teachingStyle', this)"><i class="fas fa-question-circle"></i> Quiz</div>
                        <div class="tx-chip"              data-value="slides"  onclick="txSelectChip('teachingStyle', this)"><i class="fas fa-desktop"></i> Slides</div>
                        <div class="tx-chip"              data-value="summary" onclick="txSelectChip('teachingStyle', this)"><i class="fas fa-file-alt"></i> Summary</div>
                    </div>
                </div>

                <div class="tx-field span-2">
                    <div class="tx-toggle-row">
                        <label class="tts-switch">
                            <input type="checkbox" id="txWikiToggle" onchange="tutorixState.wikiSearch = this.checked">
                            <span class="tts-slider"></span>
                        </label>
                        <span class="tx-toggle-label">
                            <i class="fas fa-book-open"></i>
                            Enrich with Wikipedia curriculum data
                        </span>
                    </div>
                </div>

                <div class="tx-field span-2">
                    <label class="tx-label"><i class="fas fa-question"></i> Question / Topic</label>
                    <textarea id="txQuestion" class="tx-textarea"
                              placeholder="e.g. Explain mitosis step by step, or What caused World War I?"
                              onkeydown="if(event.ctrlKey && event.key==='Enter') txSubmit()"></textarea>
                    <span class="tx-hint">Ctrl + Enter to submit &nbsp;Â·&nbsp; Be specific for better results</span>
                </div>

            </div>

            <button id="txSubmitBtn" class="tx-submit" onclick="txSubmit()">
                <span class="tx-btn-label"><i class="fas fa-bolt"></i> ASK TUTORIX</span>
                <i class="fas fa-circle-notch tx-btn-spin"></i>
            </button>

            <div id="txResult" class="tx-result">
                <div class="tx-result-header">
                    <div class="tx-result-label"><i class="fas fa-graduation-cap"></i> Tutorix Response</div>
                    <div class="tx-result-actions">
                        <button class="tx-action-btn" onclick="txCopyResult()"><i class="fas fa-copy"></i> Copy</button>
                        <button class="tx-action-btn" onclick="txSendToChat()"><i class="fas fa-paper-plane"></i> Send to Chat</button>
                    </div>
                </div>
                <div id="txResultBody" class="tx-result-body"></div>
            </div>

        </div>
    </div>

    <!-- ================================================================
         AUTH INTERFACE
    ================================================================ -->
    <div id="authContainer" class="auth-container">
        <div class="auth-left">
            <canvas id="neuralCanvas"></canvas>
            <div class="auth-left-content">
                <div class="auth-logo">
                    <div class="logo-icon">
                        <img src="cyanix_logo.png" alt="Cyanix Logo" style="width:100%; height:100%; object-fit:contain;">
                    </div>
                    <div class="logo-text">CYANIX AI</div>
                </div>
                <h1 class="auth-headline">
                    <span class="line1">POWERED BY</span>
                    <span class="line2">NixAi</span>
                </h1>
                <p class="auth-subtitle">
                    <span id="typewriterText"></span><span class="cursor"></span>
                </p>
                <div class="feature-grid">
                    <div class="feature-chip"><i class="fas fa-bolt feature-icon"></i><span class="feature-text">Instant Access</span></div>
                    <div class="feature-chip"><i class="fas fa-shield-alt feature-icon"></i><span class="feature-text">End-to-End Encryption</span></div>
                    <div class="feature-chip"><i class="fas fa-brain feature-icon"></i><span class="feature-text">Multiple AI Models</span></div>
                    <div class="feature-chip"><i class="fas fa-graduation-cap feature-icon"></i><span class="feature-text">Tutorix AI Tutor</span></div>
                    <div class="feature-chip"><i class="fas fa-paperclip feature-icon"></i><span class="feature-text">File Attachments</span></div>
                    <div class="feature-chip"><i class="fas fa-history feature-icon"></i><span class="feature-text">Unlimited History</span></div>
                </div>
                <div class="status-bar">
                    <div class="status-dot"></div>
                    <span class="status-text">ALL SYSTEMS OPERATIONAL</span>
                </div>
            </div>
        </div>

        <div class="auth-right">
            <div class="corner-tr"></div>
            <div class="corner-bl"></div>
            <div class="auth-form">
                <div class="form-header">
                    <div class="form-header-title" id="formHeaderTitle">NEURAL ACCESS</div>
                    <div class="form-header-sub" id="formHeaderSub">// authenticate to continue_</div>
                </div>
                <div class="auth-tabs">
                    <div class="tab-indicator" id="tabIndicator"></div>
                    <button class="auth-tab active" id="signinTab" onclick="switchAuthTab('signin')">SIGN IN</button>
                    <button class="auth-tab" id="signupTab" onclick="switchAuthTab('signup')">SIGN UP</button>
                </div>

                <!-- SIGN IN -->
                <div id="signinForm" style="animation: formAppear 0.3s ease-out both;">
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <div class="input-wrapper-inner">
                            <i class="fas fa-at input-icon"></i>
                            <input type="email" id="signinEmail" class="form-input" placeholder="you@example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div class="input-wrapper-inner password-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="signinPassword" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                   onkeydown="if(event.key==='Enter') signInWithEmail()">
                            <button class="password-toggle" type="button" onclick="togglePassword('signinPassword')"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="rememberMe">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Remember me</span>
                        </label>
                        <a href="#" class="forgot-link" onclick="forgotPassword(); return false;">Forgot password?</a>
                    </div>
                    <button class="auth-button" id="signinBtn" onclick="signInWithEmail()">
                        <span class="btn-icon"><i class="fas fa-sign-in-alt"></i></span>
                        <span class="btn-text">SIGN IN</span>
                        <div class="btn-spinner"></div>
                    </button>
                    <div class="divider"><span>OR CONTINUE WITH</span></div>
                    <div class="social-buttons">
                        <button class="social-button" onclick="signInWithGoogle()"    title="Google">   <i class="fab fa-google"></i>    </button>
                        <button class="social-button" onclick="signInWithMicrosoft()" title="Microsoft"><i class="fab fa-microsoft"></i> </button>
                        <button class="social-button" onclick="signInWithGithub()"   title="GitHub">   <i class="fab fa-github"></i>    </button>
                        <button class="social-button" onclick="signInWithDiscord()"  title="Discord">  <i class="fab fa-discord"></i>   </button>
                    </div>
                    <p class="auth-footer">Don't have an account? <a href="#" onclick="switchAuthTab('signup'); return false;">Sign Up</a></p>
                </div>

                <!-- SIGN UP -->
                <div id="signupForm" style="display:none;">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <div class="input-wrapper-inner">
                            <i class="fas fa-user input-icon"></i>
                            <input type="text" id="signupName" class="form-input" placeholder="Your full name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <div class="input-wrapper-inner">
                            <i class="fas fa-at input-icon"></i>
                            <input type="email" id="signupEmail" class="form-input" placeholder="you@example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div class="input-wrapper-inner password-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="signupPassword" class="form-input" placeholder="Min. 6 characters">
                            <button class="password-toggle" type="button" onclick="togglePassword('signupPassword')"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <div class="input-wrapper-inner password-wrapper">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="signupConfirmPassword" class="form-input" placeholder="Confirm password">
                            <button class="password-toggle" type="button" onclick="togglePassword('signupConfirmPassword')"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="acceptTerms">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">I agree to the Terms &amp; Privacy Policy</span>
                        </label>
                    </div>
                    <button class="auth-button" id="signupBtn" onclick="signUpWithEmail()">
                        <span class="btn-icon"><i class="fas fa-user-plus"></i></span>
                        <span class="btn-text">CREATE ACCOUNT</span>
                        <div class="btn-spinner"></div>
                    </button>
                    <div class="divider"><span>OR SIGN UP WITH</span></div>
                    <div class="social-buttons">
                        <button class="social-button" onclick="signUpWithGoogle()"    title="Google">   <i class="fab fa-google"></i>    </button>
                        <button class="social-button" onclick="signUpWithMicrosoft()" title="Microsoft"><i class="fab fa-microsoft"></i> </button>
                        <button class="social-button" onclick="signUpWithGithub()"    title="GitHub">   <i class="fab fa-github"></i>    </button>
                        <button class="social-button" onclick="signUpWithDiscord()"   title="Discord">  <i class="fab fa-discord"></i>   </button>
                    </div>
                    <p class="auth-footer">Already have an account? <a href="#" onclick="switchAuthTab('signin'); return false;">Sign In</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================================
         CHAT INTERFACE
    ================================================================ -->
    <div id="chatContainer" class="chat-container">

        <button class="mobile-menu-button" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="sidebar-logo-icon">
                        <img src="cyanix_logo.png" alt="Cyanix Logo" style="width:100%; height:100%; object-fit:contain;">
                    </div>
                    <div class="sidebar-logo-text">CYANIX AI</div>
                </div>
            </div>

            <div class="sidebar-content">
                <button class="new-chat-button" onclick="newChat()">
                    <i class="fas fa-plus"></i> NEW CHAT
                </button>

                <!-- âœ¦ TUTORIX BUTTON âœ¦ -->
                <button class="tutorix-nav-btn" onclick="openTutorix()">
                    <i class="fas fa-graduation-cap"></i>
                    <span>TUTORIX</span>
                    <span class="tutorix-nav-badge">AI TUTOR</span>
                </button>

                <div class="sidebar-section">
                    <div class="sidebar-title">RECENT CHATS</div>
                    <div class="chat-history" id="chatHistory">
                        <div class="chat-history-empty">
                            Sign in to see<br>your chat history
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-title">ACTIONS</div>
                    <div class="sidebar-actions">
                        <button class="sidebar-action" onclick="openModelModal()">
                            <i class="fas fa-brain sidebar-action-icon"></i>
                            <span>Change AI Model</span>
                        </button>
                        <button class="sidebar-action" onclick="clearChat()">
                            <i class="fas fa-trash sidebar-action-icon"></i>
                            <span>Clear Chat</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer" style="position:relative;">
                <div class="user-menu" id="userMenu">
                    <div class="user-menu-item" onclick="openProfileModal()"><i class="fas fa-user"></i> My Profile</div>
                    <div class="user-menu-item" onclick="openSettingsModal()"><i class="fas fa-paint-brush"></i> Customize Cyanix</div>
                    <div class="menu-tts-section">
                        <div class="menu-tts-label">â¬¡ PERSONALIZE CYANIX</div>
                        <div class="menu-tts-row">
                            <span class="menu-tts-name"><i class="fas fa-volume-up"></i> Voice Replies</span>
                            <label class="tts-switch">
                                <input type="checkbox" id="ttsToggleCheck" onchange="toggleTts(this.checked)">
                                <span class="tts-slider"></span>
                            </label>
                        </div>
                        <div class="tts-voice-row" id="ttsVoiceRow" style="opacity:0.35; pointer-events:none;">
                            <button class="tts-voice-btn active" id="ttsMaleBtn" onclick="setTtsVoice('male')">
                                <i class="fas fa-male"></i><span>Male</span>
                                <div style="font-size:9px; opacity:0.7;">ðŸ‡¦ðŸ‡º Australian</div>
                            </button>
                            <button class="tts-voice-btn" id="ttsFemaleBtn" onclick="setTtsVoice('female')">
                                <i class="fas fa-female"></i><span>Female</span>
                                <div style="font-size:9px; opacity:0.7;">ðŸ‡¬ðŸ‡§ British</div>
                            </button>
                        </div>
                    </div>
                    <div class="user-menu-divider"></div>
                    <div class="user-menu-item" onclick="openLink('https://suprosmith-coder.github.io/NixAi_Nova/terms')"><i class="fas fa-file-alt"></i> Terms of Service</div>
                    <div class="user-menu-item" onclick="openLink('https://suprosmith-coder.github.io/NixAi_Nova/privacy')"><i class="fas fa-lock"></i> Privacy Policy</div>
                    <div class="user-menu-divider"></div>
                    <div class="user-menu-item danger" onclick="signOut()"><i class="fas fa-sign-out-alt"></i> Sign Out</div>
                </div>

                <div class="user-profile" onclick="toggleUserMenu()" id="userProfile">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">User</div>
                        <div class="user-email" id="userEmail">user@nixai.app</div>
                    </div>
                    <i class="fas fa-chevron-up" id="userMenuChevron" style="color:var(--text-secondary); font-size:10px; transition:transform 0.3s; margin-left:auto;"></i>
                </div>
            </div>
        </div>

        <!-- Main Chat -->
        <div class="main-chat">
            <div class="chat-header">
                <div style="display:flex; align-items:center; gap:14px;">
                    <div class="chat-title" id="chatTitle">New Chat</div>
                    <div class="model-badge" onclick="openModelModal()">
                        <i class="fas fa-brain"></i>
                        <span id="currentModel">Maverick</span>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="header-action" onclick="openTutorix()"
                            style="border-color:rgba(125,0,255,0.35); color:#c084fc;" title="Open Tutorix AI Tutor">
                        <i class="fas fa-graduation-cap"></i> Tutorix
                    </button>
                    <button class="header-action" onclick="openModelModal()">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
            </div>

            <div class="messages-container" id="messagesContainer">
                <div class="messages-wrapper" id="messagesWrapper">
                    <!-- Welcome screen rendered by JS -->
                </div>
            </div>

            <div class="input-container">
                <div class="input-wrapper">
                    <div id="selectedFilesPreview" class="selected-files-preview" style="display:none;"></div>
                    <div id="ragSearchIndicator" class="rag-indicator" style="display:none;">
                        <i class="fas fa-circle-notch"></i>
                        <span id="ragIndicatorText">Searching the web for live data...</span>
                    </div>
                    <div style="position:relative;">
                        <textarea
                            id="chatInput"
                            class="chat-input"
                            placeholder="Message Cyanix AI..."
                            rows="1"
                            oninput="autoResize(this)"
                            onkeydown="handleKeyDown(event)"
                        ></textarea>
                        <div class="input-actions">
                            <span class="char-count" id="charCount">0/2000</span>
                            <button class="input-button" onclick="openFileModal()" title="Attach Files"><i class="fas fa-paperclip"></i></button>
                            <button class="input-button send" onclick="sendMessage()" title="Send Message"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                    <div style="display:flex; align-items:center; justify-content:space-between; padding:8px 4px 2px; gap:8px;">
                        <div class="search-toggles">
                            <button class="rag-toggle" id="webToggle" onclick="toggleWebSearch()" title="Toggle live DuckDuckGo web search">
                                <span class="rag-dot"></span><i class="fas fa-globe"></i><span id="webToggleLabel">Web Search</span>
                            </button>
                            <button class="rag-toggle wiki" id="wikiToggle" onclick="toggleWikiSearch()" title="Toggle Wikipedia knowledge search">
                                <span class="rag-dot"></span><i class="fas fa-book-open"></i><span id="wikiToggleLabel">Wikipedia</span>
                            </button>
                        </div>
                        <span style="font-size:10px; color:var(--text-secondary); font-family:'JetBrains Mono',monospace; white-space:nowrap;" id="ragStatusText"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================================
         WELCOME SCREEN TEMPLATE
    ================================================================ -->
    <template id="welcomeScreenTemplate">
        <div class="welcome-screen">
            <div class="welcome-icon">
                <img src="cyanix_logo.png" alt="Cyanix Logo" style="width:64px; height:64px; object-fit:contain;">
            </div>
            <h1 class="welcome-title">CYANIX AI</h1>
            <p class="welcome-subtitle">
                Advanced neural interface for intelligent conversations.
                No API keys required â€” powered by state-of-the-art AI infrastructure.
            </p>
            <div class="example-grid">
                <div class="example-card" onclick="useExample('brainstorm')">
                    <div class="example-header"><i class="fas fa-lightbulb example-icon"></i><div class="example-title">Brainstorm Ideas</div></div>
                    <div class="example-text">"Help me brainstorm creative project ideas for a tech startup"</div>
                </div>
                <div class="example-card" onclick="useExample('explain')">
                    <div class="example-header"><i class="fas fa-book example-icon"></i><div class="example-title">Explain Concepts</div></div>
                    <div class="example-text">"Explain quantum computing in simple terms"</div>
                </div>
                <div class="example-card" onclick="useExample('code')">
                    <div class="example-header"><i class="fas fa-code example-icon"></i><div class="example-title">Write Code</div></div>
                    <div class="example-text">"Write a Python function to sort a list using quicksort"</div>
                </div>
                <div class="example-card" onclick="openTutorix()" style="border-color:rgba(125,0,255,0.2); background:rgba(125,0,255,0.04);">
                    <div class="example-header">
                        <i class="fas fa-graduation-cap example-icon" style="color:#c084fc;"></i>
                        <div class="example-title" style="color:#c084fc;">Tutorix AI Tutor</div>
                    </div>
                    <div class="example-text">"Get a lesson, quiz, or step-by-step explanation on any subject"</div>
                </div>
            </div>
        </div>
    </template>

    <!-- ================================================================
         SETTINGS MODAL
    ================================================================ -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-panel">
            <div class="settings-header">
                <div class="settings-title">CYANIX <span>SETTINGS</span></div>
                <button class="settings-close" onclick="closeSettingsModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="settings-current-badge" id="settingsCurrentBadge">Loading your preferences...</div>
            <div class="settings-section">
                <div class="settings-section-label"><i class="fas fa-comment-dots"></i> Tone</div>
                <div class="settings-chips" id="toneChips">
                    <div class="settings-chip active" data-value="professional"  onclick="selectChip('tone', this)"><i class="fas fa-briefcase"></i> Professional</div>
                    <div class="settings-chip" data-value="friendly"             onclick="selectChip('tone', this)"><i class="fas fa-smile"></i> Friendly</div>
                    <div class="settings-chip" data-value="casual"               onclick="selectChip('tone', this)"><i class="fas fa-coffee"></i> Casual</div>
                    <div class="settings-chip" data-value="strict_teacher"       onclick="selectChip('tone', this)"><i class="fas fa-chalkboard-teacher"></i> Strict Teacher</div>
                    <div class="settings-chip" data-value="motivational"         onclick="selectChip('tone', this)"><i class="fas fa-fire"></i> Motivational</div>
                </div>
            </div>
            <div class="settings-section">
                <div class="settings-section-label"><i class="fas fa-align-left"></i> Response Length</div>
                <div class="settings-chips" id="lengthChips">
                    <div class="settings-chip" data-value="short"          onclick="selectChip('length', this)"><i class="fas fa-compress-alt"></i> Short</div>
                    <div class="settings-chip active" data-value="balanced" onclick="selectChip('length', this)"><i class="fas fa-balance-scale"></i> Balanced</div>
                    <div class="settings-chip" data-value="detailed"        onclick="selectChip('length', this)"><i class="fas fa-expand-alt"></i> Detailed</div>
                </div>
            </div>
            <div class="settings-section">
                <div class="settings-section-label"><i class="fas fa-sliders-h"></i> Mode</div>
                <div class="settings-chips" id="modeChips">
                    <div class="settings-chip" data-value="study"            onclick="selectChip('mode', this)"><i class="fas fa-graduation-cap"></i> Study</div>
                    <div class="settings-chip active" data-value="general"   onclick="selectChip('mode', this)"><i class="fas fa-robot"></i> General</div>
                    <div class="settings-chip" data-value="coding"           onclick="selectChip('mode', this)"><i class="fas fa-code"></i> Coding</div>
                    <div class="settings-chip" data-value="creative"         onclick="selectChip('mode', this)"><i class="fas fa-paint-brush"></i> Creative</div>
                    <div class="settings-chip" data-value="reasoning"        onclick="selectChip('mode', this)"><i class="fas fa-brain"></i> Reasoning</div>
                </div>
            </div>
            <button class="settings-save-btn" onclick="saveSettings()">
                <i class="fas fa-save" style="margin-right:8px;"></i> SAVE PREFERENCES
            </button>
        </div>
    </div>

    <!-- ================================================================
         PROFILE MODAL
    ================================================================ -->
    <div id="profileModal" class="settings-modal">
        <div class="settings-panel" style="max-width:440px;">
            <div class="settings-header">
                <div class="settings-title">MY <span>PROFILE</span></div>
                <button class="settings-close" onclick="closeProfileModal()"><i class="fas fa-times"></i></button>
            </div>
            <div style="text-align:center; padding:8px 0 24px;">
                <div class="avatar-upload-zone" onclick="triggerAvatarUpload()" title="Click to change photo">
                    <div id="profileAvatarLarge" style="width:88px; height:88px; border-radius:50%; background:linear-gradient(135deg,var(--primary),var(--secondary)); display:flex; align-items:center; justify-content:center; font-size:32px; font-weight:800; color:var(--background); margin:0 auto; overflow:hidden; box-shadow:var(--primary-glow);"></div>
                    <div class="avatar-upload-overlay"><i class="fas fa-camera"></i><span>Change</span></div>
                </div>
                <input type="file" id="avatarFileInput" accept="image/*" style="display:none;" onchange="handleAvatarUpload(event)">
                <div id="profileEmail" style="font-size:12px; color:var(--text-secondary); font-family:'JetBrains Mono',monospace; margin-top:12px;"></div>
            </div>
            <div class="profile-edit-field">
                <label class="profile-edit-label">Display Name</label>
                <input type="text" id="profileNameInput" class="profile-edit-input" placeholder="Your name">
            </div>
            <div class="profile-edit-field">
                <label class="profile-edit-label">Profile Photo URL <span style="font-weight:400;opacity:0.5;">(or upload above)</span></label>
                <input type="url" id="profileAvatarUrlInput" class="profile-edit-input" placeholder="https://...">
            </div>
            <div style="background:rgba(0,243,255,0.04); border:1px solid rgba(0,243,255,0.08); border-radius:12px; padding:14px 18px; font-size:11px; color:var(--text-secondary); font-family:'JetBrains Mono',monospace; line-height:2.2; margin-bottom:18px;">
                <div>Model: <span id="profileModel" style="color:var(--primary);"></span></div>
                <div>Member since: <span id="profileJoined" style="color:var(--text);"></span></div>
            </div>
            <button class="profile-save-btn" id="profileSaveBtn" onclick="saveProfile()">
                <i class="fas fa-save" style="margin-right:8px;"></i> SAVE PROFILE
            </button>
        </div>
    </div>

    <!-- App JavaScript -->
    <script src="JavaScript.js"></script>
</body>
</html>
